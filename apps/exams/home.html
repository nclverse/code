<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Table of Contents</title>
<link href="http://fonts.googleapis.com/css?family=Fira+Sans:300,400,500,700" rel="stylesheet" type="text/css" />
    <link href="http://nclverse.github.io/code/css/styles.css" media="all" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <section id="container">
      <section id="sidebar"><nav id="main-nav">
  <header id="title">
    <img class="site-logo" alt="logo" src="http://nclverse.github.io/code/img/logo.svg" />
    <div class="titles">
      <span class="verse-title">NCL<strong>Verse</strong></span>
      <ul class="docs-site">
        <li><a class="active" href="http://nclverse.github.io/code">Code</a></li><li><a href="http://nclverse.github.io/dissertation">Dissertation</a></li><li><a href="http://nclverse.github.io/design">Design</a></li><li><a href="http://nclverse.github.io/help">Help</a></li>
      </ul>
    </div>
  </header>
  <div class="category">
    <header class="category-title"><h1>apps<span class="count">234 LOC</span></h1></header>
    <ul class="titles">
      <li><a class="title-link">Architecture<span class="count">0 LOC</span></a>
        <ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/apps/architecture/core-ideas.html">Core Ideas<span class="count">0</span></a></li></ul>
      </li>
      </ul><ul class="titles">
      <li><a class="title-link active">Exams<span class="count">234 LOC</span></a>
        <ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/apps/exams/leechness.html">Leechness<span class="count">24</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/apps/exams/gateway.html">Gateway<span class="count">56</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/apps/exams/handler.html">Handler<span class="count">18</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link active" href="http://nclverse.github.io/code/apps/exams/home.html">Home<span class="count">56</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/apps/exams/layout.html">Layout<span class="count">39</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/apps/exams/transforms.html">Transforms<span class="count">41</span></a></li></ul>
      </li>
      </ul>
  </div><div class="category">
    <header class="category-title"><h1>utilities<span class="count">248 LOC</span></h1></header>
    <ul class="titles">
      <li><a class="title-link">Docs Generator<span class="count">248 LOC</span></a>
        <ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/utilities/docs-generator/architecture.html">Architecture<span class="count">0</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/utilities/docs-generator/overview.html">Overview<span class="count">0</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/utilities/docs-generator/collect.html">Collect<span class="count">48</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/utilities/docs-generator/transform.html">Transform<span class="count">82</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/utilities/docs-generator/render.html">Render<span class="count">118</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/utilities/docs-generator/roadmap.html">Roadmap<span class="count">0</span></a></li></ul>
      </li>
      </ul>
  </div><div class="category">
    <header class="category-title"><h1>tests<span class="count">47 LOC</span></h1></header>
    <ul class="titles">
      <li><a class="title-link">Docs Generator<span class="count">47 LOC</span></a>
        <ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/tests/docs-generator/collect.html">Collect<span class="count">43</span></a></li></ul><ul class="subtitles"><li> <a class="subtitle-link" href="http://nclverse.github.io/code/tests/docs-generator/render.html">Render<span class="count">4</span></a></li></ul>
      </li>
      </ul>
  </div>

</nav></section>
      <section id="read-area"><article class="post">
  <section class="content"><div id="table-of-contents">
<h1>Table of Contents</h1>
<div id="text-table-of-contents">
<ul>
<li><a href="Malformed">1. Namespaces</a></li>
<li><a href="Malformed">2. Overview</a></li>
<li><a href="Malformed">3. Sidebar</a></li>
<li><a href="Malformed">4. Selected Modules</a></li>
<li><a href="Malformed">5. Topic Map</a></li>
<li><a href="Malformed">6. Display Topic</a></li>
<li><a href="Malformed">7. HTMLize Module</a></li>
<li><a href="Malformed">8. Home Routes</a></li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-1">
<h1 id="sec-1"><span class="section-number-1">1</span> Namespaces</h1>
<div class="outline-text-1" id="text-1">
<div class="org-src-container">

<pre class="src src-clojure">(ns exam-vault.routes.home
  (:require [compojure.core :refer :all]
	    [exam-vault.views.layout :as layout]
	    [exam-vault.views.transforms :as reshape]
	    [exam-vault.models.data :as data]
	    [exam-vault.models.accessors :as collect]
	    [ring.util.response :as resp]
	    [exam-vault.models.calc :as calc]))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-1">
<h1 id="sec-2"><span class="section-number-1">2</span> Overview</h1>
<div class="outline-text-1" id="text-2">
<p>
 The app is divided in to three sections for the moment.  A module
 selector on the left, a question display area on the center and a
 topic mark distribution that pops up on the left
More details on the functionalities available here: 
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-1">
<h1 id="sec-3"><span class="section-number-1">3</span> Sidebar</h1>
<div class="outline-text-1" id="text-3">
<div class="org-src-container">

<pre class="src src-clojure">(defn sidebar [modules selection]
  [:nav {:id "module-selector" :class "sidebar"}
   [:ul [:li {:class "stage-selection"} [:a "Stage 3"]]
    (reshape/listify (collect/module-data modules [:code :module]) selection)]])
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-1">
<h1 id="sec-4"><span class="section-number-1">4</span> Selected Modules</h1>
<div class="outline-text-1" id="text-4">
<div class="org-src-container">

<pre class="src src-clojure">(defn selected-modules [module-list] (collect/get-modules module-list))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-1">
<h1 id="sec-5"><span class="section-number-1">5</span> Topic Map</h1>
<div class="outline-text-1" id="text-5">
<p>
Creates a topic map by zipping together zeroes
</p>

<div class="org-src-container">

<pre class="src src-clojure">(defn topics-map [module]
  (let [topics (:topics module)]
    (zipmap topics (repeat 0))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-1">
<h1 id="sec-6"><span class="section-number-1">6</span> Display Topic</h1>
<div class="outline-text-1" id="text-6">
<div class="org-src-container">

<pre class="src src-clojure">(defn display-topics [module year]
  [:aside {:class "topic-selector"}
   [:h1 (str "Topic Share in ") [:strong year]]
   (reshape/htmlize-topics (merge-with + (topics-map module) (calc/topic-map (collect/select-questions (:papers module) year))))])
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-1">
<h1 id="sec-7"><span class="section-number-1">7</span> HTMLize Module</h1>
<div class="outline-text-1" id="text-7">
<p>
Uses the module info and year to create the HTML
representation for the sidebar.
</p>

<div class="org-src-container">

<pre class="src src-clojure">(defn htmlize-module [mod year]
  (let [{:keys [code module papers]} mod
	years (map :year papers)]
    [:section {:class "module-view"}
     [:nav {:class "years segmented-control"} (reshape/htmlize-years code year years)]
     [:div {:class "content-area"}
      [:div {:class "scrollable-area"}
       (reshape/htmlize-papers (collect/select-questions papers year))]
      (display-topics mod year)]]))

(defn get-years [module] (map :year (:papers module)))

(defn display-modules ([module modules]
			 (let [selection (collect/select-module module modules)]
			   (display-modules module modules (str (first (get-years selection))))))
  ([module modules year]
     (let [selection (collect/select-module module modules)]
       (layout/common
	(sidebar modules module)
	(htmlize-module selection year)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-1">
<h1 id="sec-8"><span class="section-number-1">8</span> Home Routes</h1>
<div class="outline-text-1" id="text-8">
<div class="org-src-container">

<pre class="src src-clojure">(defroutes home-routes
  (GET "/" {cookies :cookies}
       (if (cookies "modules") (resp/redirect "/modules") (resp/redirect "/login")))
  (context "/modules" {cookies :cookies}
	   (if-let [mods (:value (cookies "modules"))]
	     (let  [module-list (clojure.string/split mods #" ")
		    modules (selected-modules module-list)
		    username (:value (cookies "name"))
		    id (:value (cookies "id"))]
	       (routes
		(GET "/" [] (display-modules (:code (first modules)) modules))
		(context "/:module" [module]
			 (GET "/" [] (display-modules module modules))
			 (GET "/:year" [year] (display-modules module modules year)))))
	     (routes
	      (GET "/*" [] (resp/redirect "/login"))))))
</pre>
</div>
</div>
</div>
</section>

</article></section>
    </section>
  </body>

</html>